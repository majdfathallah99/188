<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

  <!-- ===== Unit (قطعة) card ===== -->
  <t t-name="product_detail_search.UnitCard">
    <div class="sf-card">
      <div class="sf-card-title">قطعة</div>
      <div class="sf-card-value">
        <t t-esc="details.currency_symbol"/> <t t-esc="details.price"/>
        <span class="sf-uom"> - <t t-esc="details.uom_name"/></span>
      </div>
    </div>
  </t>

  <!-- ===== Pack (التعبئة) card — relaxed condition ===== -->
  <t t-name="product_detail_search.PackCard">
    <!-- render whenever a quantity exists; price can be 0.0 in edge cases -->
    <t t-if="('package_qty' in details) and details.package_qty">
      <div class="sf-card">
        <div class="sf-card-title">
          التعبئة
          <t t-if="details.package_name">
            <span> (</span><t t-esc="details.package_name"/><span>)</span>
          </t>
        </div>
        <div class="sf-card-value">
          <t t-esc="details.currency_symbol"/> <t t-esc="details.package_price"/>
          <span class="sf-x"> × </span>
          <t t-esc="details.package_qty"/>
        </div>
      </div>
    </t>
  </t>

  <!-- ===== Dashboard wrapper (the template OWL is looking for) ===== -->
  <t t-name="product_detail_search.Dashboard">
    <div class="o_product_detail_search o_form_view o_xxl">
      <div class="o_form_sheet_bg">
        <div class="o_form_sheet">
          <h2>Find Product</h2>
          <form t-on-submit.prevent="onSearch" class="o_row o_gap">
            <input t-model="state.query" placeholder="اكتب أو امسح باركود" class="o_input" />
            <button type="submit" class="btn btn-primary">بحث</button>
          </form>

          <t t-if="state.loading">
            <div class="o_mt16">...جاري التحميل</div>
          </t>

          <t t-if="state.details">
            <t t-set="details" t-value="state.details"/>
            <div class="sf-cards o_mt24 o_row o_wrap o_gap">
              <t t-call="product_detail_search.UnitCard"/>
              <t t-call="product_detail_search.PackCard"/>
            </div>
          </t>
        </div>
      </div>
    </div>
  </t>

</templates>
