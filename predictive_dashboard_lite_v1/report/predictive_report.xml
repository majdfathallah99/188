
<odoo>
    <template id="predictive_report_tmpl">
        <t t-call="web.external_layout">
            <div class="page">
                <h2>Predictive Dashboard Report</h2>
                <p>
                    <strong>Company:</strong> <span t-esc="doc.company_id.name"/><br/>
                    <strong>Period:</strong> <span t-esc="doc.date_from"/> â†’ <span t-esc="doc.date_to"/><br/>
                    <strong>Horizon (days):</strong> <span t-esc="doc.horizon_days"/><br/>
                    <t t-if="doc.product_category_id">
                        <strong>Category:</strong> <span t-esc="doc.product_category_id.display_name"/><br/>
                    </t>
                    <strong>Group By:</strong> <span t-esc="doc.group_by"/>, <strong>Method:</strong> <span t-esc="doc.method"/>
                </p>
                <table class="table table-sm o_main_table">
                    <thead>
                        <tr>
                            <th>Key</th>
                            <th>Qty in Window</th>
                            <th>Daily Rate</th>
                            <th>Forecast</th>
                            <th>On Hand</th>
                            <th>Days till Shortage</th>
                            <th>Shortage Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="doc.line_ids" t-as="l">
                            <tr>
                                <td><span t-esc="l.display_key"/></td>
                                <td class="text-right"><span t-esc="format_float(l.qty_window)"/></td>
                                <td class="text-right"><span t-esc="('%.4f' % (l.daily_rate or 0.0))"/></td>
                                <td class="text-right"><span t-esc="format_float(l.forecast_qty)"/></td>
                                <td class="text-right"><span t-esc="format_float(l.stock_onhand)"/></td>
                                <td class="text-right"><span t-esc="('%.2f' % (l.days_until_shortage or 0.0))"/></td>
                                <td><span t-esc="l.shortage_date"/></td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </t>
    </template>
</odoo>
